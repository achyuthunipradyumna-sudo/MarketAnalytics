<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Volatility Dashboard</title>
  <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
</head>
<body>

<h3>Volatility â€” Risk Regime</h3>
<div id="chart"></div>

<script>
fetch("data/breadth_full_history.csv")
.then(r=>r.text())
.then(t=>{
  const rows=t.trim().split("\n");
  const h=rows[0].split(",");
  const d=rows.slice(1).map(r=>{
    let o={}; r.split(",").forEach((v,i)=>o[h[i]]=v); return o;
  });

  const x=d.map(r=>r.Date);

  Plotly.newPlot("chart",[
    {x,y:d.map(r=>+r.nifty50_vol_20_z),name:"Index Vol Z(20)"},
    {x,y:d.map(r=>+r.median_stock_vol_20_z),name:"Stock Vol Breadth Z"}
  ],{
    height:600,
    hovermode:"x unified",
    shapes:[{type:"line",x0:0,x1:1,y0:0,y1:0,xref:"paper"}]
  },{
    scrollZoom:false,
    doubleClick:false
  });
});
</script>

</body>
</html>
